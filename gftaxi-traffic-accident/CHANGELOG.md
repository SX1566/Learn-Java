# 交通事故模块变更日志

| 序号 | 版本号 | 发布日期        | 发布环境 | 备注
|------|-------|------------------|----------|---------
| 19   | 0.3.6 | 2018-11-07 10:21 | 测试环境 | 
| 19   | 0.3.5 | 2018-10-29 18:14 | 测试环境 | 
| 18   | 0.3.4 | 2018-10-23 18:44 | 测试环境 | 
| 17   | 0.3.3 | 2018-10-18 19:36 | 测试环境 | 
| 16   | 0.3.2 | 2018-10-17 19:00 | 测试环境 | 
| 15   | 0.3.1 | 2018-10-16 15:00 | 测试环境 | 
| 14   | 0.3.0 | 2018-10-15 21:30 | 测试环境 | 
| 13   | 0.2.8 | 2018-09-10 14:20 | 测试环境 | 
| 12   | 0.2.7 | 2018-08-31 16:42 | 测试环境 | 
| 11   | 0.2.6 | 2018-08-31 10:54 | 测试环境 | 
| 10   | 0.2.5 | 2018-08-30 10:32 | 测试环境 | 
| 9    | 0.2.4 | 2018-08-29 09:00 | 测试环境 | 
| 8    | 0.2.3 | 2018-08-28 18:40 | 测试环境 | 
| 7    | 0.2.2 | 2018-08-28 14:30 | 测试环境 | 
| 6    | 0.2.1 | 2018-08-27 14:30 | 测试环境 | 
| 5    | 0.2.0 | 2018-08-22 10:00 | 测试环境 | 事故登记
| 4    | 0.1.3 | 2018-07-18 11:40 | 测试环境 | 
| 3    | 0.1.2 | 2018-07-17 11:30 | 测试环境 | 
| 2    | 0.1.1 | 2018-07-16 19:30 | 测试环境 | 
| 1    | 0.1.0 | 2018-07-16 10:00 | 测试环境 | 事故报案

## 0.3.6 2018-11-07 10:21 发布到测试环境

- 事故登记表单选择司机后自动加载司机倒查信息
- 实现"获取车队信息列表"接口
- 修正事故报告和登记表单审核信息缺少必填验证

## 0.3.5 2018-10-29 18:14 发布到测试环境

- 修正了修改事故登记时，patch 了 id 这未修改字段的问题
- 优化“筛选变更数据”方法的数组修改情况判断代码
- 优化“判断数据是否修改过”方法
- 修正事故报告和表单删除当事车、人或物品后保存提示数据无修改错误
- 实现事故报告汇总统计视图
- 修改事故登记和报告表单当事人无伤亡时医疗费非必填
- 修改表单状态区未完成的显示空白
- 事故表单事发经过位置移到事故信息最下层和登记表单事发经过输入框默认两行的高度
- 修改事故报告表单进一步处理时才显示“诫勉谈话”信息
- 修正报告表单整改措施文本框超长
- 实现了事故操作记录视图的界面
- 记录事故操作时增加对结果的记录
- 将事故操作相关的常量从工具类中提取成为一个新类
- Service 模块中，记录事故操作时增加对标题的记录
- 完善 service 模块中操作记录相关实现的单元测试
- Jpa 模块中，记录事故操作时增加对标题的记录

## 0.3.4 2018-10-23 18:44 发布到测试环境

- 优化事故报告和登记表单二次确认和表单必填验证的先后顺序
- Polishing 事故报告和登记表单待定显示效果
- 优化事故报告表单事故现场图缩放效果
- 优化事故报告表单多行输入框标题文本位置与输入框第一行持平
- 添加判断司机和车辆载入非空的信息
- 优化“筛选变更数据”接口避免生成空值
- 修正事故登记表单隐藏的分类信息值没有被清除
- 优化事故报告表单案件主体状态区样式

## 0.3.3 2018-10-18 19:36 发布到测试环境

- 优化事故报告表单安全教育的多行输入框标题文本位置与输入框第一行持平
- 修正事故报告表单删除按钮不显示问题
- 修正表单保存请求附带了多余 cars、peoples、others 信息
- 修正审核不通过的登记表单不显示保存按钮
- 优化事故报告和登记表单删除当事车辆和人时必须保留一条信息
- 事故报告和登记保存请求移除 updatedTime 字段
- 事故报告和登记表单当事车和人项目增加验证是否存在一条“自车”类型的信息
- 事故报告表单修正新建当事人、车项目的损失预估控件为 number 类型
- 移除事故报告表单诉讼信息栏必填验证
- 移除事故报告表单安全教育信息必填验证和改为默认展开 事故报告安全教育栏改为默认展开
- 修改事故报告和登记视图 ToSubmit 状态统一为“待提交”
- 优化事故报告和登记视图状态按钮栏
- 修正事故登记表单删除按钮不显示问题
- 事故登记、事故报告视图状态按钮组UI设计改进
- 添加安全教育栏开始和结束时间先后顺序验证

## 0.3.2 2018-10-17 19:00 发布到测试环境

- 优化表单重复保存问题
- 修正事故登记表单上传司机照片后照片无加载
- 修正事故登记只读表单紧急联系人信息和事发时间控件可编辑问题
- 修正事故登记附件操作按钮显示和隐藏判断
- 事故报告和登记表单提交和审核操作添加二次确认
- 优化事故登记和报告视图状态栏初始化方法
- 事故登记表单GPS车速添加数字类型验证
- 修正事故报告和登记视图请求参数不正确和重复请求问题
- 移除事故登记表单其他物品的实际损失列
- 修正事故经过内容较长会导致事故报告表单排版乱掉
- 事故报告表单添加案件主体状态区

## 0.3.1 2018-10-16 15:00 发布到测试环境

- 修正事故登记更新“审核不通过”时报错权限不足
- 事故报案视图隐藏待上报状态按钮
- 事故报告表单根据审核结果控制审核意见是否必填
- 修正事故报告表单状态没有正常显示
- 修正事故登记表单保存后丢失“事故等级”信息
- 事故报告视图的待登记应为待报告
- 修正事故报告更新“审核不通过”时报错权限不足
- 修正事故报告表单司机驾驶状态的显示
- 修复事故登记和事故报告在提交时，提交时间和逾期情况未更新的问题
- 事故报告表单当事车辆和当事人项目补充“更多”列
- 优化事故报告表单安全教育栏排版就文本框改为多行输入

## 0.3.0 2018-10-15 21:30 发布到测试环境

事故报案、事故登记重构及新增事故报案，由于改动较大，数据库需要重新创建。

## 0.2.8 2018-09-10 14:20 发布到测试环境

事故报案、事故登记：

- 修正 chrome46 兼容性报错

## 0.2.7 2018-08-31 16:42 发布到测试环境

事故登记：

- 修正事故登记待登记\待审核视图状态按钮显示条件

## 0.2.6 2018-08-31 10:54 发布到测试环境

事故登记：

- 修正事故登记已审核视图附件在线查看失效
- 修正事故登记审核请求参数错误

## 0.2.5 2018-08-30 10:32 发布到测试环境

事故登记：

- 删除事故登记视图多余代码
- 修正事故登记审核请求地址错误
- 修正事故登记提交后报案状态无更新问题和单元测试相关修改
- 事故报案 Dao 添加 Transactional 注解
- 修正事故登记提交和审核为 POST 请求
- 修正事故登记表单保存时因为当事人、车辆和其他物体无序号报错

## 0.2.4 2018-08-29 09:00 发布到测试环境

事故登记：

- 使用弹性框模型水平垂直居中司机图片和事故现场图
- 使用弹性框模型优化现场图片、附件的显示并增加点击查看大图功能

## 0.2.3 2018-08-28 18:40 发布到测试环境

事故登记：

- 修正事故登记表单司机照片点击事件为打开预览
- 修正事故登记 Dao.update 更新主体信息部分的错误
- 事故登记 Dao.update 接口针对当事车辆、当事人、其他物体部分的实现

## 0.2.2 2018-08-28 14:30 发布到测试环境

事故登记：

- 修正事故登记表单加载文件服务器附件资源地址错误
- 文件服务器访问路径改为 http://{ip}:{port}/file
- 实现事故现场图点击在线查看功能
- 修正登记视图驾驶状态显示 undefined 问题
- 修正司机照片 ID 数值错误

## 0.2.1 2018-08-27 14:30 发布到测试环境

事故登记：

- 修正事故登记汇总统计报表打开报错问题
- 完善事故登记表单司机照片上传和展示功能
- 完善事故登记表单事故现场图上传和展示功能
- 完善事故登记表单审核附件上传和展现功能
- 事故登记 Dao.update 接口的实现与单元测试 （主体属性部分）

## 0.2.0 2018-08-22 10:00 发布到测试环境

事故登记：

- 事故登记基本功能

事故报案：

- 修改打开报案只读表单时不显示禁用样式
- 修正报案只读表单发送多余请求问题
- 事故报案改为自增主键

分类标准：

- 删除分类标准的"碰撞类型/正面碰撞"
- 添加事故登记相关分类标准信息
- 实现分类标准信息的 Rest、Service 接口

## 0.1.3 2018-07-18 11:40 发布到测试环境

事故报案：

- 修正表单输入控件只读限制不准确问题
- 事故报案是上报案件时添加确认窗口
- 优化事故报案视图"事故车号"的字体样式和"事发地点"的宽度
- 事故报案模块的"提交"相关信息改为“上报案件”
- 事故报案表单"提交"按钮改成"上报"按钮
- 事故报案视图按照权限显示"新建"和"编辑"按钮
- 事故报案表单提交后自动关闭


## 0.1.2 2018-07-17 11:30 发布到测试环境

事故报案：

- 事故报案表单优化加载特定车辆的司机列表代码
- 事故报案表单“车号”文本框改为只读
- 优化事故报案表单“事故形态”和“碰撞类型”下拉列表显示自定义分类选项
- 格式化事故报案视图“逾期报案”列内容和加长“接案人”列宽度
- 优化事故报案表单只读文本框的样式
- 修改事故报案表单简要描述栏为自动行高

## 0.1.1 2018-07-16 19:30 发布到测试环境

事故报案：

- 跨域请求添加允许 Content-Type 请求头，上报案件的跨域权限问题
- 优化从邮件报案获取邮件内容的方法，自动去除 html 标记
- 增加收取报案邮件的缓存处理，避免重复将已收取的邮件转换为 DTO
- 修正视图和表单事故状态的返回值
- 修正新建的事故报案状态为"已登记"
- 修改事故报案 submit 接口返回事故编号和报案时间并优化代码

## 0.1.0 2018-07-16 10:00 发布到测试环境

事故报案：

- 事故报案的系统报案和邮件报案

分类标准：

- 添加事故报案相关分类标准信息